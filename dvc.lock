schema: '2.0'
stages:
  preprocess:
    cmd: python -m fan_control.pipeline.preprocess
    deps:
    - path: data/raw
      hash: md5
      md5: 382624fb978884f02639a9bf349389b0.dir
      size: 18229669
      nfiles: 1
    - path: src/fan_control/pipeline/preprocess.py
      hash: md5
      md5: f788fbda62214be03bf8113b27442cb2
      size: 17741
    params:
      params.yaml:
        preprocess:
          min_power:
            cpu: 10.0
            gpu: 5.0
          max_temp:
            cpu: 95.0
            gpu: 85.0
          test_size: 0.2
    outs:
    - path: data/processed
      hash: md5
      md5: a6b06759d708156abd203941343be835.dir
      size: 21593123
      nfiles: 11
  train:
    cmd: python -m fan_control.pipeline.train
    deps:
    - path: data/processed/train.csv
      hash: md5
      md5: 7c2a1408a520510bec359da528862f3f
      size: 14261323
    - path: data/processed/val.csv
      hash: md5
      md5: 74861f1dc3c653649bb49126987306d2
      size: 3545623
    - path: src/fan_control/models/
      hash: md5
      md5: 06c90d1fc603876016915106694197ac.dir
      size: 151173
      nfiles: 12
    - path: src/fan_control/pipeline/train.py
      hash: md5
      md5: ea6115b7b019dcad97a02954fdf7b4c1
      size: 2312
    params:
      params.yaml:
        model.features:
          state:
          - T_cpu
          - T_gpu
          control:
          - pwm2
          - pwm4
          - pwm5
          disturbance:
          - P_cpu
          - P_gpu
          - T_amb
          targets:
          - T_cpu
          - T_gpu
        model.pinn:
          hidden_dims:
          - 64
          - 32
          epochs: 25
          learning_rate: 0.001
          batch_size: 128
          physics_weight: 0.5
          dropout: 0.15
          dt: 1.0
          early_stopping_patience: 5
        model.type: pinn
    outs:
    - path: out/train/logs
      hash: md5
      md5: 2ec33b50b9c1a363c4ae6b621c0edff5.dir
      size: 10788
      nfiles: 2
    - path: out/train/metrics.json
      hash: md5
      md5: 1bd1f3cd7e492e3bbcb3f071a905697f
      size: 185
    - path: out/train/models/pinn/
      hash: md5
      md5: 904abcc4ffe68158afc336a9bfe4dc4a.dir
      size: 20395
      nfiles: 2
  evaluate:
    cmd: python -m fan_control.pipeline.evaluate
    deps:
    - path: data/processed/val.csv
      hash: md5
      md5: 74861f1dc3c653649bb49126987306d2
      size: 3545623
    - path: out/train/models/pinn/
      hash: md5
      md5: 904abcc4ffe68158afc336a9bfe4dc4a.dir
      size: 20395
      nfiles: 2
    - path: src/fan_control/models/
      hash: md5
      md5: 06c90d1fc603876016915106694197ac.dir
      size: 151173
      nfiles: 12
    - path: src/fan_control/pipeline/evaluate.py
      hash: md5
      md5: 300dd0afdd00c32c0301f90d5f16e53e
      size: 24368
    params:
      params.yaml:
        evaluate.horizons:
        - 10
        - 20
        - 50
        model.type: pinn
    outs:
    - path: out/evaluate/metrics.json
      hash: md5
      md5: aabebc2a2574c2f7a70d1fce28609883
      size: 1817
    - path: out/evaluate/plots
      hash: md5
      md5: fed74e9e455d906314f08c30ca894451.dir
      size: 581337
      nfiles: 5
