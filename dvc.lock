schema: '2.0'
stages:
  preprocess:
    cmd: python -m fan_control.pipeline.preprocess
    deps:
    - path: data/raw
      hash: md5
      md5: 382624fb978884f02639a9bf349389b0.dir
      size: 18229669
      nfiles: 1
    - path: src/fan_control/pipeline/preprocess.py
      hash: md5
      md5: 283e27239f49fe3e17ec7213465073c3
      size: 18380
    params:
      params.yaml:
        preprocess:
          min_power:
            cpu: 10.0
            gpu: 5.0
          max_temp:
            cpu: 95.0
            gpu: 85.0
          test_size: 0.2
    outs:
    - path: data/processed
      hash: md5
      md5: 816efdacd21a3a60ac13077a84aed310.dir
      size: 22580324
      nfiles: 11
  train:
    cmd: python -m fan_control.pipeline.train
    deps:
    - path: data/processed/train.csv
      hash: md5
      md5: 1f37f3851073a87acfbf7f11add916a4
      size: 15048215
    - path: data/processed/val.csv
      hash: md5
      md5: 15921402bff05b4ec353b31adff829bd
      size: 3745932
    - path: src/fan_control/models/
      hash: md5
      md5: 2f18f35fe99b882775d300cc33292912.dir
      size: 153082
      nfiles: 12
    - path: src/fan_control/pipeline/train.py
      hash: md5
      md5: ea6115b7b019dcad97a02954fdf7b4c1
      size: 2312
    params:
      params.yaml:
        model.features:
          state:
          - T_cpu
          - T_gpu
          control:
          - pwm2
          - pwm4
          - pwm5
          disturbance:
          - P_cpu
          - P_gpu
          - T_amb
          - cpu_busy_pct
          targets:
          - T_cpu
          - T_gpu
        model.gbr:
          n_estimators: 100
          max_depth: 4
          learning_rate: 0.1
          l2_regularization: 1.0
          random_state: 42
        model.type: gbr
    outs:
    - path: out/train/logs
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: out/train/metrics.json
      hash: md5
      md5: e08bf3eb206066e373aca9b22a235fb2
      size: 253
    - path: out/train/models/gbr/
      hash: md5
      md5: e913e7fcff001f8fa9fed4248e5ed245.dir
      size: 365692
      nfiles: 3
  evaluate:
    cmd: python -m fan_control.pipeline.evaluate
    deps:
    - path: data/processed/val.csv
      hash: md5
      md5: 15921402bff05b4ec353b31adff829bd
      size: 3745932
    - path: out/train/models/gbr/
      hash: md5
      md5: e913e7fcff001f8fa9fed4248e5ed245.dir
      size: 365692
      nfiles: 3
    - path: src/fan_control/models/
      hash: md5
      md5: 2f18f35fe99b882775d300cc33292912.dir
      size: 153082
      nfiles: 12
    - path: src/fan_control/pipeline/evaluate.py
      hash: md5
      md5: 300dd0afdd00c32c0301f90d5f16e53e
      size: 24368
    params:
      params.yaml:
        evaluate.horizons:
        - 10
        - 20
        - 50
        model.type: gbr
    outs:
    - path: out/evaluate/metrics.json
      hash: md5
      md5: 0ae51ccad74da895e9d0f14cbbf14674
      size: 1826
    - path: out/evaluate/plots
      hash: md5
      md5: 0f30c32ddb2069cbe43129aec6b2001e.dir
      size: 520563
      nfiles: 5
